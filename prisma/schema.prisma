generator client {
  provider = "prisma-client"
  output   = "../generated/prisma"
}

datasource db {
  provider = "postgresql"
}

enum Role {
  USER
  SERVICE_PROVIDER
}

enum ServiceType{
MEDICAL
HOUSE_HELP
BEAUTY
FITNESS
EDUCATION
OTHER
}

enum AppointmentStatus{
  BOOKED 
  CANCELLED
}

model User {
  id           String        @id @default(uuid())
  name         String
  email        String        @unique
  passwordHash String
  role         Role

  service      Service[]
  Appointment   Appointment[]
  createdAt    DateTime      @default(now())
}


model Service{
  id              String @id @default (uuid())
  name            String
  type            ServiceType
  providerId      String
  provider         User          @relation( fields: [providerId], references: [id])
  durationMinutes  Int
  avilability     Availabilty[]
  appointment   Appointment[]
  createdAt       DateTime @default(now())

}

model Availabilty{
  id    String @id @default(uuid())
  serviceId   String 
  avilablityService   Service  @relation( fields:[serviceId] , references: [id])
  dayOfWeek String
  // "HH:MM"
  startTime String
  endTime   String

}

model Appointment{
  id    String @id@default(uuid())
  userId  String
  serviceId String
  user         User          @relation( fields: [userId], references: [id])
  service       Service       @relation( fields: [serviceId], references: [id])
  date String
  startTime String
  endTime   String 
  slotId  String  @unique
  status  AppointmentStatus
  createdAt DateTime @default(now())
}
